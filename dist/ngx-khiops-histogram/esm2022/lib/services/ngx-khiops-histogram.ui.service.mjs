import { Injectable } from '@angular/core';
// import { TranslateService } from '@ngstack/translate';
import * as d3 from 'd3';
import * as i0 from "@angular/core";
export class HistogramUIService {
    static { this.chartColors = ['#6e93d5', '#ffbe46']; }
    // static translate: TranslateService;
    static setTranslationService() {
        // translate: TranslateService
        // this.translate = translate;
    }
    static getColor(i) {
        return this.chartColors[i];
    }
    static getColors() {
        return this.chartColors;
    }
    // @ts-ignore
    static getCurrentBarPosition(datas, canvasPosition, event, yPadding = 0) {
        if (datas) {
            let x = event.pageX - canvasPosition.left;
            let y = event.pageY - canvasPosition.top;
            for (let i = 0; i < datas.length; i++) {
                if (
                // @ts-ignore
                y > datas?.[i].coords?.y &&
                    // @ts-ignore
                    y < datas?.[i].coords?.y + datas?.[i].coords?.barH + yPadding / 2 &&
                    // @ts-ignore
                    x > datas?.[i].coords?.x &&
                    // @ts-ignore
                    x < datas?.[i].coords?.x + datas?.[i].coords?.barW) {
                    return i;
                }
            }
        }
        return undefined;
    }
    static generateTooltip(datasLabels, d, isFirstInterval) {
        let bounds = '';
        if (isFirstInterval) {
            bounds += '[';
        }
        else {
            bounds += ']';
        }
        bounds += d.partition[0] + ', ' + d.partition[1] + ']';
        return (
        // this.translate.get('GLOBAL.DENSITY') +
        datasLabels.value +
            ': ' +
            d3.format('.2e')(d.value) +
            '<br>' +
            // this.translate.get('GLOBAL.FREQUENCY') +
            datasLabels.frequency +
            ': ' +
            d.frequency +
            '<br>' +
            // this.translate.get('GLOBAL.INTERVAL') +
            datasLabels.partition +
            ': ' +
            bounds);
    }
    static initCanvasContext(canvas, w, h) {
        const ctx = canvas?.getContext('2d');
        if (ctx && canvas) {
            ctx.imageSmoothingEnabled = true;
            canvas.width = w;
            canvas.height = h;
        }
        return ctx;
    }
    /**
     * Before draw canvas, clean dom
     */
    static cleanDomContext(ctx, canvas) {
        if (canvas) {
            // @ts-ignore
            ctx = canvas.getContext('2d');
            // @ts-ignore
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
    }
    static hexToRgba(hex, alpha) {
        if (!/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {
            throw new Error('Invalid Hex format');
        }
        let c;
        if (hex.length === 4) {
            c = '#' + [hex[1], hex[1], hex[2], hex[2], hex[3], hex[3]].join('');
        }
        else {
            c = hex;
        }
        const r = parseInt(c.slice(1, 3), 16);
        const g = parseInt(c.slice(3, 5), 16);
        const b = parseInt(c.slice(5, 7), 16);
        return `rgba(${r}, ${g}, ${b}, ${alpha})`;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.0.4", ngImport: i0, type: HistogramUIService, deps: [], target: i0.ɵɵFactoryTarget.Injectable }); }
    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "18.0.4", ngImport: i0, type: HistogramUIService, providedIn: 'root' }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.0.4", ngImport: i0, type: HistogramUIService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root',
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWtoaW9wcy1oaXN0b2dyYW0udWkuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1raGlvcHMtaGlzdG9ncmFtL3NyYy9saWIvc2VydmljZXMvbmd4LWtoaW9wcy1oaXN0b2dyYW0udWkuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLHlEQUF5RDtBQUN6RCxPQUFPLEtBQUssRUFBRSxNQUFNLElBQUksQ0FBQzs7QUFNekIsTUFBTSxPQUFPLGtCQUFrQjthQUNiLGdCQUFXLEdBQWEsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDLEFBQW5DLENBQW9DO0lBQy9ELHNDQUFzQztJQUV0QyxNQUFNLENBQUMscUJBQXFCO1FBQzFCLDhCQUE4QjtRQUM5Qiw4QkFBOEI7SUFDaEMsQ0FBQztJQUVELE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBUztRQUN2QixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUVELE1BQU0sQ0FBQyxTQUFTO1FBQ2QsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzFCLENBQUM7SUFFRCxhQUFhO0lBQ2IsTUFBTSxDQUFDLHFCQUFxQixDQUMxQixLQUF5QixFQUN6QixjQUF1QixFQUN2QixLQUFpQixFQUNqQixXQUFtQixDQUFDO1FBRXBCLElBQUksS0FBSyxFQUFFLENBQUM7WUFDVixJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUM7WUFDMUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLEtBQUssR0FBRyxjQUFjLENBQUMsR0FBRyxDQUFDO1lBRXpDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsRUFB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UUFDeEMsQ0FBQztRQUNELElBQUksQ0FBQyxDQUFDO1FBQ04sSUFBSSxHQUFHLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ3JCLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN0RSxDQUFDO2FBQU0sQ0FBQztZQUNOLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDVixDQUFDO1FBQ0QsTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ3RDLE1BQU0sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUN0QyxNQUFNLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDdEMsT0FBTyxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLEtBQUssR0FBRyxDQUFDO0lBQzVDLENBQUM7OEdBeEhVLGtCQUFrQjtrSEFBbEIsa0JBQWtCLGNBRmpCLE1BQU07OzJGQUVQLGtCQUFrQjtrQkFIOUIsVUFBVTttQkFBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbi8vIGltcG9ydCB7IFRyYW5zbGF0ZVNlcnZpY2UgfSBmcm9tICdAbmdzdGFjay90cmFuc2xhdGUnO1xyXG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XHJcbmltcG9ydCB7IEhpc3RvZ3JhbVZhbHVlc0kgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25neC1raGlvcHMtaGlzdG9ncmFtLmludGVyZmFjZXMnO1xyXG5cclxuQEluamVjdGFibGUoe1xyXG4gIHByb3ZpZGVkSW46ICdyb290JyxcclxufSlcclxuZXhwb3J0IGNsYXNzIEhpc3RvZ3JhbVVJU2VydmljZSB7XHJcbiAgc3RhdGljIHJlYWRvbmx5IGNoYXJ0Q29sb3JzOiBzdHJpbmdbXSA9IFsnIzZlOTNkNScsICcjZmZiZTQ2J107XHJcbiAgLy8gc3RhdGljIHRyYW5zbGF0ZTogVHJhbnNsYXRlU2VydmljZTtcclxuXHJcbiAgc3RhdGljIHNldFRyYW5zbGF0aW9uU2VydmljZSgpIHtcclxuICAgIC8vIHRyYW5zbGF0ZTogVHJhbnNsYXRlU2VydmljZVxyXG4gICAgLy8gdGhpcy50cmFuc2xhdGUgPSB0cmFuc2xhdGU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0Q29sb3IoaTogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmNoYXJ0Q29sb3JzW2ldO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldENvbG9ycygpOiBzdHJpbmdbXSB7XHJcbiAgICByZXR1cm4gdGhpcy5jaGFydENvbG9ycztcclxuICB9XHJcblxyXG4gIC8vIEB0cy1pZ25vcmVcclxuICBzdGF0aWMgZ2V0Q3VycmVudEJhclBvc2l0aW9uKFxyXG4gICAgZGF0YXM6IEhpc3RvZ3JhbVZhbHVlc0lbXSxcclxuICAgIGNhbnZhc1Bvc2l0aW9uOiBET01SZWN0LFxyXG4gICAgZXZlbnQ6IE1vdXNlRXZlbnQsXHJcbiAgICB5UGFkZGluZzogbnVtYmVyID0gMFxyXG4gICkge1xyXG4gICAgaWYgKGRhdGFzKSB7XHJcbiAgICAgIGxldCB4ID0gZXZlbnQucGFnZVggLSBjYW52YXNQb3NpdGlvbi5sZWZ0O1xyXG4gICAgICBsZXQgeSA9IGV2ZW50LnBhZ2VZIC0gY2FudmFzUG9zaXRpb24udG9wO1xyXG5cclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgIHkgPiBkYXRhcz8uW2ldLmNvb3Jkcz8ueSAmJlxyXG4gICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgeSA8IGRhdGFzPy5baV0uY29vcmRzPy55ICsgZGF0YXM/LltpXS5jb29yZHM/LmJhckggKyB5UGFkZGluZyAvIDIgJiZcclxuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgIHggPiBkYXRhcz8uW2ldLmNvb3Jkcz8ueCAmJlxyXG4gICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgeCA8IGRhdGFzPy5baV0uY29vcmRzPy54ICsgZGF0YXM/LltpXS5jb29yZHM/LmJhcldcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2VuZXJhdGVUb29sdGlwKFxyXG4gICAgZGF0YXNMYWJlbHM6IGFueSxcclxuICAgIGQ6IEhpc3RvZ3JhbVZhbHVlc0ksXHJcbiAgICBpc0ZpcnN0SW50ZXJ2YWw6IGJvb2xlYW5cclxuICApOiBzdHJpbmcge1xyXG4gICAgbGV0IGJvdW5kcyA9ICcnO1xyXG4gICAgaWYgKGlzRmlyc3RJbnRlcnZhbCkge1xyXG4gICAgICBib3VuZHMgKz0gJ1snO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYm91bmRzICs9ICddJztcclxuICAgIH1cclxuICAgIGJvdW5kcyArPSBkLnBhcnRpdGlvblswXSArICcsICcgKyBkLnBhcnRpdGlvblsxXSArICddJztcclxuICAgIHJldHVybiAoXHJcbiAgICAgIC8vIHRoaXMudHJhbnNsYXRlLmdldCgnR0xPQkFMLkRFTlNJVFknKSArXHJcbiAgICAgIGRhdGFzTGFiZWxzLnZhbHVlICtcclxuICAgICAgJzogJyArXHJcbiAgICAgIGQzLmZvcm1hdCgnLjJlJykoZC52YWx1ZSkgK1xyXG4gICAgICAnPGJyPicgK1xyXG4gICAgICAvLyB0aGlzLnRyYW5zbGF0ZS5nZXQoJ0dMT0JBTC5GUkVRVUVOQ1knKSArXHJcbiAgICAgIGRhdGFzTGFiZWxzLmZyZXF1ZW5jeSArXHJcbiAgICAgICc6ICcgK1xyXG4gICAgICBkLmZyZXF1ZW5jeSArXHJcbiAgICAgICc8YnI+JyArXHJcbiAgICAgIC8vIHRoaXMudHJhbnNsYXRlLmdldCgnR0xPQkFMLklOVEVSVkFMJykgK1xyXG4gICAgICBkYXRhc0xhYmVscy5wYXJ0aXRpb24gK1xyXG4gICAgICAnOiAnICtcclxuICAgICAgYm91bmRzXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGluaXRDYW52YXNDb250ZXh0KFxyXG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCB8IHVuZGVmaW5lZCB8IG51bGwsXHJcbiAgICB3OiBudW1iZXIsXHJcbiAgICBoOiBudW1iZXJcclxuICApIHtcclxuICAgIGNvbnN0IGN0eCA9IGNhbnZhcz8uZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIGlmIChjdHggJiYgY2FudmFzKSB7XHJcbiAgICAgIGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSB0cnVlO1xyXG4gICAgICBjYW52YXMud2lkdGggPSB3O1xyXG4gICAgICBjYW52YXMuaGVpZ2h0ID0gaDtcclxuICAgIH1cclxuICAgIHJldHVybiBjdHg7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBCZWZvcmUgZHJhdyBjYW52YXMsIGNsZWFuIGRvbVxyXG4gICAqL1xyXG4gIHN0YXRpYyBjbGVhbkRvbUNvbnRleHQoXHJcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB8IHVuZGVmaW5lZCB8IG51bGwsXHJcbiAgICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50IHwgdW5kZWZpbmVkIHwgbnVsbFxyXG4gICkge1xyXG4gICAgaWYgKGNhbnZhcykge1xyXG4gICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBoZXhUb1JnYmEoaGV4OiBzdHJpbmcsIGFscGhhOiBudW1iZXIpIHtcclxuICAgIGlmICghL14jKFtBLUZhLWYwLTldezN9KXsxLDJ9JC8udGVzdChoZXgpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBIZXggZm9ybWF0Jyk7XHJcbiAgICB9XHJcbiAgICBsZXQgYztcclxuICAgIGlmIChoZXgubGVuZ3RoID09PSA0KSB7XHJcbiAgICAgIGMgPSAnIycgKyBbaGV4WzFdLCBoZXhbMV0sIGhleFsyXSwgaGV4WzJdLCBoZXhbM10sIGhleFszXV0uam9pbignJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjID0gaGV4O1xyXG4gICAgfVxyXG4gICAgY29uc3QgciA9IHBhcnNlSW50KGMuc2xpY2UoMSwgMyksIDE2KTtcclxuICAgIGNvbnN0IGcgPSBwYXJzZUludChjLnNsaWNlKDMsIDUpLCAxNik7XHJcbiAgICBjb25zdCBiID0gcGFyc2VJbnQoYy5zbGljZSg1LCA3KSwgMTYpO1xyXG4gICAgcmV0dXJuIGByZ2JhKCR7cn0sICR7Z30sICR7Yn0sICR7YWxwaGF9KWA7XHJcbiAgfVxyXG59XHJcbiJdfQ==